export function TextPage(level, index) {
  const isA1 = String(level).toUpperCase()==='A1';
  const ytId = (isA1 && Number(index)===1) ? 'WXbcHk3TJsE' : (isA1 && Number(index)===2 ? '2uZ0WKMrfkY' : (isA1 && Number(index)===3 ? 'X1BkKKokG5M' : ''));
  const ytEmbed = ytId ? `
          <div style="margin-top:12px">
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;background:#000">
              <iframe src="https://www.youtube.com/embed/${ytId}" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%" loading="lazy"></iframe>
            </div>
          </div>
  ` : '';
  const ytEmbedA1T7 = (isA1 && Number(index)===7) ? `
          <div style="margin-top:12px">
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;background:#000">
              <iframe src="https://www.youtube.com/embed/_m66JpP0idI" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%" loading="lazy"></iframe>
            </div>
          </div>
  ` : '';
  const ytEmbedA1T8 = (isA1 && Number(index)===8) ? `
          <div style="margin-top:12px">
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;background:#000">
              <iframe src="https://www.youtube.com/embed/ufBTMWG1cXY" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%" loading="lazy"></iframe>
            </div>
          </div>
  ` : '';
  const ytEmbedA1T9 = (isA1 && Number(index)===9) ? `
          <div style="margin-top:12px">
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;background:#000">
              <iframe src="https://www.youtube.com/embed/OdXvxZKzKVc" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%" loading="lazy"></iframe>
            </div>
          </div>
  ` : '';
  const lessonA1T8 = (isA1 && Number(index)===8) ? `
    <div class="section-title" style="margin-top:12px">âš ï¸ Aula 8 â€“ Imperatives & Warnings na Fazenda</div>
    <div class="small" style="margin-top:8px"><strong>Tema:</strong> Regras de seguranÃ§a na fazenda</div>
    <div class="small" style="margin-top:4px"><strong>TÃ­tulo:</strong> Farm Safety Rules</div>
    <div class="section-title" style="margin-top:12px">ğŸ¯ Objetivos da Aula</div>
    <ul style="margin-top:8px">
      <li>Usar o imperativo em inglÃªs para dar ordens e instruÃ§Ãµes.</li>
      <li>Reconhecer frases de alerta e advertÃªncia comuns na fazenda.</li>
      <li>Ampliar vocabulÃ¡rio relacionado Ã  seguranÃ§a agrÃ­cola.</li>
      <li>Compreender a importÃ¢ncia da seguranÃ§a como prioridade no trabalho rural.</li>
    </ul>
    <div class="section-title" style="margin-top:12px">ğŸ“š Estrutura da Aula</div>
    <div style="margin-top:8px"><strong>1. IntroduÃ§Ã£o</strong></div>
    <div class="small" style="margin-top:4px">Na fazenda, a seguranÃ§a Ã© prioridade. Em inglÃªs, usamos o imperativo para dar instruÃ§Ãµes diretas e claras. Exemplo:</div>
    <div style="margin-top:6px">Wear your boots. â†’ Use suas botas.</div>
    <div>Donâ€™t touch the fence. â†’ NÃ£o toque na cerca.</div>
    <div style="margin-top:10px"><strong>2. Estrutura do Imperativo</strong></div>
    <div>Forma afirmativa: verbo na forma base â†’ Read the signs.</div>
    <div>Forma negativa: Donâ€™t + verbo â†’ Donâ€™t smoke near the hay.</div>
    <div class="small">â¡ï¸ O sujeito (you) estÃ¡ implÃ­cito.</div>
    <div style="margin-top:10px"><strong>3. VocabulÃ¡rio Essencial</strong></div>
    <table style="width:100%;border-collapse:collapse;margin-top:6px">
      <thead><tr><th style="text-align:left">EN</th><th style="text-align:left">PT</th><th style="text-align:left">PronÃºncia (BR)</th></tr></thead>
      <tbody>
        <tr><td>safety</td><td>seguranÃ§a</td><td>sÃªi-f-ti</td></tr>
        <tr><td>signs</td><td>placas</td><td>sÃ¡inz</td></tr>
        <tr><td>wear</td><td>usar/vestir</td><td>uÃ©r</td></tr>
        <tr><td>boots</td><td>botas</td><td>bÃºts</td></tr>
        <tr><td>gloves</td><td>luvas</td><td>glÃ¢vz</td></tr>
        <tr><td>stop</td><td>parar</td><td>stÃ³p</td></tr>
        <tr><td>machine</td><td>mÃ¡quina</td><td>mÃ¢-xÃ­n</td></tr>
        <tr><td>electric fence</td><td>cerca elÃ©trica</td><td>ilÃ©ktrik fÃªns</td></tr>
        <tr><td>dangerous</td><td>perigoso</td><td>dÃªn-dja-rÃ¢s</td></tr>
        <tr><td>smoke</td><td>fumar/fumaÃ§a</td><td>smÃ³uk</td></tr>
      </tbody>
    </table>
    <div class="section-title" style="margin-top:12px">ğŸ”‘ OpÃ§Ãµes de Aprendizagem</div>
    <div style="margin-top:6px"><strong>ğŸ”¹ 1. Comandos Positivos e Negativos</strong></div>
    <div>Positivo: Be careful every day. â†’ Seja cuidadoso todos os dias.</div>
    <div>Negativo: Donâ€™t run near the machines. â†’ NÃ£o corra perto das mÃ¡quinas.</div>
    <div style="margin-top:8px"><strong>ğŸ”¹ 2. Cartazes de SeguranÃ§a (Signs)</strong></div>
    <div>Danger â€“ Electric Fence â†’ Perigo â€“ Cerca elÃ©trica</div>
    <div>Stop â€“ Authorized Personnel Only â†’ Pare â€“ Somente pessoal autorizado</div>
    <div>No Smoking â†’ Proibido fumar</div>
    <div class="small">â¡ï¸ O aluno pode imaginar ou desenhar placas simples com essas frases.</div>
    <div style="margin-top:8px"><strong>ğŸ”¹ 3. Mini-DiÃ¡logo de SeguranÃ§a</strong></div>
    <div>Supervisor: Please, wear your gloves.</div>
    <div>Trabalhador: Yes, I will.</div>
    <div>Supervisor: Donâ€™t touch the electric fence. It is dangerous.</div>
    <div>Trabalhador: Okay, I understand.</div>
    <div style="margin-top:8px"><strong>ğŸ”¹ 4. Lista de Regras da Fazenda</strong></div>
    <ul style="margin-top:6px">
      <li>Safety is priority number one.</li>
      <li>Wear boots and gloves.</li>
      <li>Stop the machine immediately.</li>
      <li>Donâ€™t smoke near the hay.</li>
      <li>Wash your hands after work.</li>
    </ul>
    <div style="margin-top:8px"><strong>ğŸ”¹ 5. ComparaÃ§Ã£o Cultural</strong></div>
    <div>Em inglÃªs, as regras de seguranÃ§a sÃ£o diretas e curtas, geralmente em forma de imperativo. Exemplo: Wash your hands.</div>
    <div>Em portuguÃªs, muitas vezes usamos frases mais longas: â€œPor favor, lave bem as mÃ£os depois do trabalho.â€</div>
    <div class="section-title" style="margin-top:12px">ğŸŒ¾ Mini-HistÃ³ria da Aula</div>
    <div style="margin-top:6px"><strong>Em PortuguÃªs</strong></div>
    <div>Na fazenda, Paul lembra seus trabalhadores:</div>
    <div>A seguranÃ§a Ã© prioridade nÃºmero um.</div>
    <div>Todos devem usar botas e luvas.</div>
    <div>Se a mÃ¡quina apresentar problemas, deve ser desligada imediatamente.</div>
    <div>NinguÃ©m pode tocar na cerca elÃ©trica.</div>
    <div>Fumar perto do feno seco Ã© proibido.</div>
    <div>ApÃ³s o trabalho, todos lavam as mÃ£os com sabÃ£o.</div>
    <div>Assim, cada dia na fazenda Ã© mais seguro.</div>
    <div style="margin-top:8px"><strong>In English</strong></div>
    <div>On the farm, Paul reminds his workers:</div>
    <div>Safety is priority number one.</div>
    <div>Everyone must wear boots and gloves.</div>
    <div>If the machine has a problem, stop it immediately.</div>
    <div>Nobody should touch the electric fence.</div>
    <div>Smoking near the dry hay is forbidden.</div>
    <div>After work, everyone washes their hands with soap.</div>
    <div>This way, every day on the farm is safer.</div>
    <div class="section-title" style="margin-top:12px">ğŸ”š Encerramento</div>
    <ul style="margin-top:6px">
      <li>O uso do imperativo para ordens e instruÃ§Ãµes.</li>
      <li>Frases de alerta e advertÃªncia em inglÃªs.</li>
      <li>VocabulÃ¡rio essencial sobre seguranÃ§a agrÃ­cola.</li>
      <li>Como reconhecer placas e regras de seguranÃ§a na fazenda.</li>
    </ul>
  ` : '';
  const lessonA1T9 = (isA1 && Number(index)===9) ? `
    <div class="section-title" style="margin-top:12px">ğŸ› ï¸ Aula 9 â€“ Actions in Progress</div>
    <div class="small" style="margin-top:8px"><strong>Tema:</strong> Dia de manutenÃ§Ã£o na fazenda</div>
    <div class="small" style="margin-top:4px"><strong>TÃ­tulo:</strong> Maintenance Day</div>
    <div class="section-title" style="margin-top:12px">ğŸ¯ Objetivos da Aula</div>
    <ul style="margin-top:8px">
      <li>Usar o Present Continuous para falar de aÃ§Ãµes acontecendo agora.</li>
      <li>Diferenciar frases afirmativas, negativas e interrogativas no tempo contÃ­nuo.</li>
      <li>Ampliar vocabulÃ¡rio sobre manutenÃ§Ã£o, mÃ¡quinas e atividades em andamento.</li>
      <li>Criar frases vivas e descritivas sobre o que estÃ¡ acontecendo na fazenda.</li>
    </ul>
    <div class="section-title" style="margin-top:12px">ğŸ“š Estrutura da Aula</div>
    <div style="margin-top:8px"><strong>1. IntroduÃ§Ã£o Bonita</strong></div>
    <div class="small" style="margin-top:4px">Imagine que vocÃª chega na fazenda e tudo estÃ¡ em movimento:</div>
    <div style="margin-top:6px">The tractor is being repaired. â†’ O trator estÃ¡ sendo consertado.</div>
    <div>The fence is being fixed. â†’ A cerca estÃ¡ sendo reparada.</div>
    <div>The cows are waiting in the shade. â†’ As vacas estÃ£o esperando na sombra.</div>
    <div class="small" style="margin-top:6px">Esse Ã© o Present Continuous: mostrar o que estÃ¡ acontecendo neste momento.</div>
    <div style="margin-top:10px"><strong>2. Estrutura do Present Continuous</strong></div>
    <div>Afirmativa: Sujeito + verbo to be + verbo com -ing</div>
    <div>We are working hard.</div>
    <div style="margin-top:6px">Negativa: Sujeito + verbo to be + not + verbo com -ing</div>
    <div>They are not eating now.</div>
    <div style="margin-top:6px">Pergunta: Verbo to be + sujeito + verbo com -ing</div>
    <div>Is Carlos repairing the fence?</div>
    <div style="margin-top:10px"><strong>3. VocabulÃ¡rio Essencial</strong></div>
    <table style="width:100%;border-collapse:collapse;margin-top:6px">
      <thead><tr><th style="text-align:left">EN</th><th style="text-align:left">PT</th><th style="text-align:left">PronÃºncia (BR)</th></tr></thead>
      <tbody>
        <tr><td>now</td><td>agora</td><td>nÃ¡u</td></tr>
        <tr><td>at this moment</td><td>neste momento</td><td>Ã©t dÃ­s mÃ´-ment</td></tr>
        <tr><td>repairing</td><td>consertando</td><td>ri-pÃ©r-ing</td></tr>
        <tr><td>fixing</td><td>arrumando</td><td>fÃ­ks-ing</td></tr>
        <tr><td>cleaning</td><td>limpando</td><td>clÃ­-nin</td></tr>
        <tr><td>waiting</td><td>esperando</td><td>uÃªi-tin</td></tr>
        <tr><td>moving</td><td>movendo</td><td>mÃº-vin</td></tr>
        <tr><td>engine</td><td>motor</td><td>Ã©nd-jin</td></tr>
        <tr><td>milking machine</td><td>ordenhadeira</td><td>mÃ­lk-ing mÃ¢-xÃ­n</td></tr>
      </tbody>
    </table>
    <div class="section-title" style="margin-top:12px">ğŸŒŸ Exemplos Criativos</div>
    <div style="margin-top:6px"><strong>ğŸ‘·â€â™‚ï¸ Pessoas trabalhando</strong></div>
    <div>Carlos is repairing the old fence. â†’ Carlos estÃ¡ consertando a cerca velha.</div>
    <div>The mechanic is fixing the tractor engine. â†’ O mecÃ¢nico estÃ¡ arrumando o motor do trator.</div>
    <div>I am cleaning the milking machine. â†’ Eu estou limpando a ordenhadeira.</div>
    <div style="margin-top:8px"><strong>ğŸ„ Animais na fazenda</strong></div>
    <div>The cows are waiting in the shade. â†’ As vacas estÃ£o esperando na sombra.</div>
    <div>They are not eating at this moment. â†’ Elas nÃ£o estÃ£o comendo neste momento.</div>
    <div style="margin-top:8px"><strong>ğŸŒ¾ Ambiente em movimento</strong></div>
    <div>Everything is moving fast today. â†’ Tudo estÃ¡ se movendo rÃ¡pido hoje.</div>
    <div>The workers are carrying tools. â†’ Os trabalhadores estÃ£o carregando ferramentas.</div>
    <div>The children are watching the animals. â†’ As crianÃ§as estÃ£o observando os animais.</div>
    <div class="section-title" style="margin-top:12px">â“ Perguntas Ãºteis</div>
    <ul style="margin-top:6px">
      <li>Are we working hard today? â†’ NÃ³s estamos trabalhando duro hoje?</li>
      <li>Is the mechanic fixing the engine now? â†’ O mecÃ¢nico estÃ¡ arrumando o motor agora?</li>
      <li>Are the cows waiting in the shade? â†’ As vacas estÃ£o esperando na sombra?</li>
    </ul>
    <div class="section-title" style="margin-top:12px">ğŸ”š Encerramento</div>
    <ul style="margin-top:6px">
      <li>O uso do Present Continuous para aÃ§Ãµes em andamento.</li>
      <li>Como formar frases afirmativas, negativas e interrogativas.</li>
      <li>VocabulÃ¡rio prÃ¡tico para falar de manutenÃ§Ã£o e rotina da fazenda.</li>
      <li>Exemplos bonitos e vivos que mostram a fazenda em movimento.</li>
    </ul>
  ` : '';
  return `
    <main class="main">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <h2 id="title">Texto ${index} Â· ${level}</h2>
        <div style="display:flex;align-items:center;gap:10px">
          <div style="min-width:180px">
            <div class="progress"><div class="bar" id="levelBar" style="width:${Math.min(
              100,
              ((index - 1) / 12) * 100
            )}%"></div></div>
            <div class="small" id="progressLabel">Progresso ${index - 1}/12</div>
          </div>
        </div>
      </div>

      <section class="card">
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" data-tab="study" id="tabStudyBtn">ğŸ“˜ Guia de Estudo</button>
          <button class="btn secondary" data-tab="practice" id="tabPracticeBtn">âœï¸ Sala de ExercÃ­cios</button>
          <button class="btn secondary" data-tab="speech" id="tabSpeechBtn">ğŸ§ LaboratÃ³rio de Fala</button>
        </div>
      </section>

  <section id="tab-study" class="card">
        <div id="grammarVideo" style="margin-top:0;display:none"></div>
        <div id="grammar" style="margin-top:0"></div>
        <div id="vocab" class="flash-grid" style="margin-top:12px"></div>
        <div id="vocabTable" style="margin-top:12px"></div>
      <section class="card" id="study-footer" style="margin-top:16px">
          ${ytEmbed}
          ${ytEmbedA1T7}
          ${ytEmbedA1T8}
          ${ytEmbedA1T9}
          ${lessonA1T8 || lessonA1T9 || `<div class="section-title" style="margin-top:12px">ğŸ“ Aula de InglÃªs</div><div id="slideLessonRoot" style="margin-top:12px"></div>`}
          <div class="section-title" style="margin-top:12px">ğŸ“– Texto narrado</div>
          <div style="margin-top:8px">
            <details class="accordion">
              <summary><span class="section-title" style="margin:0">ğŸ™ï¸ Voz da narraÃ§Ã£o</span></summary>
              <div style="margin-top:8px">
                <div id="voiceSelector" class="selector" style="gap:6px"></div>
              </div>
            </details>
          </div>
          <div class="player" style="margin-top:8px">
            <div class="player-controls">
              <button class="player-btn" id="playerBack" title="Voltar 10s"><svg viewBox="0 0 24 24"><path d="M11 18l-8-6 8-6v12zm10 0l-8-6 8-6v12z"/></svg></button>
              <button class="player-btn" id="playerPlay" title="Play/Pause"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7-11-7z"/></svg></button>
              <button class="player-btn" id="playerPause" title="Pausar"><svg viewBox="0 0 24 24"><path d="M6 5h4v14H6zm8 0h4v14h-4z"/></svg></button>
              <button class="player-btn" id="playerStop" title="Parar"><svg viewBox="0 0 24 24"><path d="M6 6h12v12H6z"/></svg></button>
              <button class="player-btn" id="playerFwd" title="AvanÃ§ar 10s"><svg viewBox="0 0 24 24"><path d="M5 6l8 6-8 6V6zm10 0l8 6-8 6V6z"/></svg></button>
              <button class="player-btn" id="playerPrevSent" title="Frase anterior"><svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3 6l9 6V6l-9 6z"/></svg></button>
              <button class="player-btn" id="playerNextSent" title="PrÃ³xima frase"><svg viewBox="0 0 24 24"><path d="M16 6h2v12h-2zM6 18l9-6-9-6v12z"/></svg></button>
              <span id="playerSent" class="small" style="min-width:64px;text-align:center">0/0</span>
              <select id="playerRate" class="player-rate" title="Velocidade">
                <option value="0.75">0.75x</option>
                <option value="1">1x</option>
                <option value="1.25">1.25x</option>
                <option value="1.5">1.5x</option>
              </select>
              <input id="playerVol" class="player-vol" type="range" min="0" max="1" step="0.05" value="1" title="Volume" />
              <button class="btn" id="toggleTr" style="align-self:center;margin:8px auto">Mostrar/Ocultar traduÃ§Ã£o</button>
            </div>
          <div class="player-track">
            <input id="playerSeek" class="player-seek" type="range" min="0" max="100" step="0.1" value="0" />
            <span id="playerTime" class="small player-time">00:00 / 00:00</span>
          </div>
        </div>
        <div id="lines" class="lines" style="margin-top:8px"></div>
      </section>
      </section>


      <section id="tab-practice" class="card" style="display:none">
        <div class="section-title">âœï¸ Sala de ExercÃ­cios</div>
        <div id="exercisePageRoot" style="margin-top:8px"></div>
        <div id="gameTop" style="margin-bottom:12px"></div>
        <div id="mc"></div>
        <div id="gExercises" style="margin-top:12px"></div>
        <div class="section-title" style="margin-top:12px">ğŸ§ª ExercÃ­cios ${String(level).toUpperCase()} Texto ${index}</div>
        <div id="a1ex" style="margin-top:8px"></div>
        <div id="fill" style="margin-top:12px"></div>
        <button class="btn" id="checkFill" style="margin-top:8px">Checar</button>
        <div id="fillResult" class="small" style="margin-top:6px"></div>
      </section>

      <section id="tab-speech" class="card" style="display:none">
        <div class="section-title">ğŸ§ LaboratÃ³rio de Fala</div>
        <div class="small">PrÃ¡tica ativa de pronÃºncia.</div>
        <div class="section-title" style="margin-top:12px">ğŸ¯ Treinar pronÃºncia</div>
        <div id="pronList" class="pron-grid"></div>
        <div class="section-title" style="margin-top:12px">ğŸ§¾ Narrar texto completo</div>
        <div id="fullSpeechText" class="lines" style="margin-top:8px"></div>
        <div style="margin-top:8px;display:flex;gap:6px;flex-wrap:wrap">
          <button class="btn sm" id="fullPlayOrig" style="white-space:nowrap">Ouvir narraÃ§Ã£o original</button>
          <button class="btn danger sm" id="fullRecord" style="white-space:nowrap">Gravar minha narraÃ§Ã£o</button>
          <button class="btn secondary sm" id="fullStop" style="white-space:nowrap">Parar</button>
          <button class="btn secondary sm" id="fullPlayMine" style="white-space:nowrap">Ouvir minha narraÃ§Ã£o</button>
          <button class="btn secondary sm" id="fullDownload" style="white-space:nowrap">Baixar minha narraÃ§Ã£o</button>
          <button class="btn secondary sm" id="fullCompare" style="white-space:nowrap">Comparar</button>
        </div>
        <div id="recMeter" class="meter" style="margin-top:8px"><span style="display:block;height:6px;background:var(--primary);width:0%"></span></div>
        <audio id="fullOrigAudio" style="display:none;width:100%;margin-top:8px" controls></audio>
        <audio id="fullMyAudio" style="display:none;width:100%;margin-top:6px" controls></audio>
        <div id="fullCompareResult" class="small" style="margin-top:6px"></div>
      </section>

      <div style="margin-top:16px;display:flex;gap:8px">
        <a class="btn secondary" href="#/text/${level}/${Math.max(
          1,
          index - 1
        )}">Anterior</a>
        <a class="btn secondary" id="nextBtn" href="#/text/${level}/${Math.min(
          12,
          index + 1
        )}">PrÃ³ximo texto</a>
      </div>

      

      <button id="backToTop" class="btn" style="position:fixed;bottom:20px;right:20px;display:none;border-radius:999px;width:46px;height:46px;padding:0" aria-label="Voltar ao topo" title="Voltar ao topo">
        <img src="./public/icons/foguete.ico" alt="Subir" width="24" height="24" style="display:block;margin:auto" />
      </button>
    </main>
  `;
}
